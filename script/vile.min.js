function VileException(a,d){a=void 0===a?"Error occured":a;this.name=void 0===d?"VileException":d;this.message=a;this.level="Show Stopper";this.htmlMessage=a;this.toString=function(){return this.name+": "+this.message}}
var Vile={initialize:function(a){this.weave(a);a.e=this.VileEditor.makeEditor()},list_attr_previxes:["vile-weave"],validate_page_object:function(a,d){if("object"!==typeof a&&"undefined"!==typeof a)throw new VileException("Cannot "+(null!=d?d:"process")+" non-object and non-null");if(null===a||"undefined"==typeof a)a={};return a},isAlpha:function(a){return a.match(/[a-z]/i)},weave:function(a){this.validate_page_object(a,"weave");for(var d=document.querySelectorAll("*[vile-weave]"),b=0;b<d.length;b++){var e=
d[b].getAttribute("vile-weave");0<e.length&&(a[e]=d[b])}return a},weaveJq:function(a){try{if("undefined"==typeof $||!window.jQuery)throw"";this.validate_page_object(a,"weave");for(var d=document.querySelectorAll("*[vile-weave]"),b=0;b<d.length;b++){var e=d[b].getAttribute("vile-weave");0<e.length&&(a[e]=$(d[b]))}return a}catch(c){throw new VileException("JQuery is not loaded");}},VileEditor:{makeEditor:function(a){a=void 0===a?{}:a;var d={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,
input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},b=function(a){return"object"===typeof a&&null!==a},e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};a.esc=function(a){return String(a).replace(/[&<>"'\/]/g,function(a){return e[a]})};a.makeVoid=function(c,b){if(1!=d[c])return a.makeE(c,"",b);var f=a.generateAttributes(b);return"<"+c+f+">"};a.makeE=function(c,b,f){if(1==d[c])return a.makeVoid(c,f);f=a.generateAttributes(f);return"<"+c+f+">"+b+"</"+c+">"};
a.make=function(c,g,f){var e;if(b(g)&&"string"==typeof f)e=g,g=f;else if(b(f)&&"string"==typeof g)e=f;else throw new VileException("Invalid parameters. editor.make parameters should be element(string),content(string),attrib(object) or element(string),attrib(object),content(string)");return 1!=d[c]?a.makeE(c,g,e):a.makeVoid(c,e)};a.makeStyle=function(c,b){return c+"{"+a.generateAttributesForStyle(b)+"}"};a.generateAttributesForStyle=function(a){var b="",f;for(f in a)b+=f+":"+a[f]+";";console.log(b);
return b};a.generateAttributes=function(a){b(a)||(a={});var d="",f;for(f in a)d+=" "+f,!0!==a[f]&&(d+='="'+a[f]+'"');return d};return a}},ShadowCaster:function(){return{cast:function(a){return this.createShadowRoot()},custom:function(a){Vile.validate_page_object(a);var d=a.name.toLowerCase(),b=a.content,e=a.callback;a=a.method;if(!d.includes("-"))throw new VileException("ShadowCast needs name with '-' in it, such as 'foo-bar' or 'my-phone-number'");if(!Vile.isAlpha(d[0])||!Vile.isAlpha(d[d.length-
1]))throw new VileException("ShadowCast needs name must start and end with alphabetic character");"function"!=typeof b&&"string"!=typeof b&&(b=function(a){return a.innerHTML});e=Vile.validate_page_object(e);a=Vile.validate_page_object(a);var c=Object.create(HTMLElement.prototype),g;for(g in a)c[g]=a[g];c.shadow=function(a){if(null==a)return null==this.shadowElement&&(this.shadowElement=this.createShadowRoot()),this.shadowElement;"string"==typeof a&&(null==this.shadowElement&&(this.shadowElement=this.createShadowRoot()),
this.shadowElement.innerHTML=a)};c.refresh=function(){"function"==typeof b?this.innerHTML=b(this):"string"==typeof b&&(this.innerHTML=b)};"function"==typeof e.oncreate&&(c.createdCallback=e.oncreate);"function"==typeof e.onattach&&(c.attachedCallback=e.attached);"function"==typeof e.ondetach&&(c.detachedCallback=e.detached);"function"==typeof e.onattributechange&&(c.attributeChangedCallback=e.onattributechange);c.attachedCallback||(c.attachedCallback=c.refresh);c.createdCallback||(c.createdCallback=
c.refresh);document.registerElement(d,{prototype:c})}}}(),Factory:{mold:function(a,d){if("string"!==typeof a)throw new VileException("Template must be string");Vile.validate_page_object(d);for(var b=0;b<a.length;)b++}}};
